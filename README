RuleScribe â€“ A Discord Bot for D&D 5e Lookups, Dice Rolling, and Character Tools

RuleScribe is a Python-based Discord bot designed to streamline Dungeons & Dragons 5th Edition gameplay. It provides fast, structured rule lookups from Open5e, a reliable dice roller, and a simple SQLite-backed character storage system. The bot is built with an emphasis on clarity, maintainability, and ease of deployment.

Features:
Spell Lookup

Retrieves spell information from the Open5e API and formats it into a clean, readable Discord message, including:

Spell name
Level
Range
Casting time
Duration
Ritual and concentration status
Components and material requirements
Saving throw or attack roll
Damage and associated types
Area of effect shape and size
Description (truncated for readability)

All fields are normalized to maintain consistent output.

Condition Lookup:
Queries Open5e for D&D conditions and returns:

Condition name
Description text

Weapon Lookup:
Retrieves weapon data including:

Damage dice
Damage type
Range or melee description
Weapon properties

Dice Rolling:
Rolls dice in NdM format, such as:

1d20,4d6,2d8

Handles invalid formats and reports errors cleanly.

Character Creation and Storage (SQLite)
Users can save character entries to a local SQLite database.
Supported fields include:

Character name
Class
Level
Strength, Dexterity, Constitution
Intelligence, Wisdom, Charisma
The bot confirms class validity and prompts users for stats interactively.

Error Reporting:

User-facing messages avoid exposing internal errors.
Internal exceptions are logged to bot.log.
Admin IDs receive DM notifications with traceback summaries.

Update Command (Admin/Guild Owner Only)
The bot can self-update on the host VM:

Pulling latest code from GitHub
Installing dependencies
Restarting the bot via systemd
Proper permissions and authorization checks are enforced.

Installation and Deployment
Requirements

Python 3.10 or higher
discord.py
aiohttp
python-dotenv
rapidfuzz
SQLite3 (included with Python)

All dependencies are listed in requirements.txt and can be installed automatically.

Setup Instructions (Local and VM):

Clone the repository
git clone https://github.com/RandyRadagast/RuleScribe/tree/master
cd RuleScribe

Create and activate a virtual environment
python3 -m venv venv
source venv/bin/activate (Linux)
venv\Scripts\activate (Windows)

Install dependencies
pip install -r requirements.txt

Create a .env file and add your token
DISCORD_TOKEN=your-bot-token-here

Run locally for testing
python3 bot.py

VM Deployment Notes (Ubuntu / Systemd)

Ensure working directory contains bot.py and venv.

Commands

!roll NdM
Rolls N dice of M sides and returns the total.

!spell <query>
Searches Open5e for matching spells and displays the top result, with confirmation for ambiguous matches.

!rule <condition>
Returns conditions from the Open5e conditions endpoint.

!weapon <query>
Fetches weapon statistics and properties.

!addchar <name> <class>
Prompts the user for level and ability scores, then saves the character to the SQLite database.

!deletechar <name>
Allows users to delete their characters.

!info
Displays general bot information.

!update
Pulls latest code from GitHub, installs dependencies, and restarts the bot.
Restricted to admin IDs, application owner, or server owner.

Error Handling and Logging

All errors are logged to bot.log.
Critical errors trigger admin notifications.
User-facing messages remain concise and avoid exposing tracebacks.

Future Plans:
The following features are planned for future versions:

Encounter generation based on party average level
Character listing command
Character info lookup
Feat lookup
Inventory listings attached to character records

These features will expand RuleScribe into a more complete reference and campaign assistant.

License
RuleScribe uses data from the Open5e API.
This bot is provided for personal and community use.